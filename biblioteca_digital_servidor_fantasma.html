<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca Digital Reinaldo Duarte Castanheira</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #4a2c2a;
            --secondary-color: #d4b483;
            --gold-color: #d4b45f;
            --background-color: #f5f5f5;
            --text-color: #333;
            --card-bg: #fff;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
            --header-bg: #d4b45f;
            --header-text: #4a2c2a;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Playfair Display', serif;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .nav-bar {
            background-color: var(--header-bg);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            gap: 2rem;
        }
        
        .nav-bar a {
            color: var(--header-text);
            text-decoration: none;
            font-weight: bold;
            font-size: 1.1rem;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        
        .nav-bar a:hover {
            background-color: rgba(74, 44, 42, 0.1);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .intro {
            text-align: center;
            margin-bottom: 2rem;
            border: 1px solid #e0e0e0;
            padding: 2rem;
            background-color: #fff;
            position: relative;
        }
        
        .intro-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .stylized-r {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 80px;
            height: 80px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .stylized-r:hover {
            transform: translateY(-50%) scale(1.1);
        }
        
        .r-letter {
            font-family: 'Playfair Display', serif;
            font-size: 70px;
            font-weight: 700;
            color: var(--gold-color);
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 2;
            font-style: italic;
        }
        
        .r-shadow {
            position: absolute;
            width: 60px;
            height: 60px;
            background: var(--primary-color);
            border-radius: 50%;
            z-index: 1;
            opacity: 0.2;
            transform: translate(5px, 5px);
        }
        
        .welcome-message {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            text-align: center;
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            background-color: var(--gold-color);
            padding: 10px;
            border-radius: 5px;
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.5s ease, transform 0.5s ease;
            z-index: 10;
            margin-top: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .welcome-message.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .intro h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }
        
        .intro h2 {
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
        }
        
        .intro p {
            font-style: italic;
            margin-bottom: 1rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .stat-badge {
            position: absolute;
            right: -20px;
            top: 10px;
            background-color: var(--gold-color);
            color: var(--primary-color);
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transform: rotate(10deg);
            border: 2px dashed var(--primary-color);
            background-image: radial-gradient(circle, #e6c87d, var(--gold-color));
            text-shadow: 1px 1px 1px rgba(255,255,255,0.5);
        }
        
        .stat-badge::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 1px solid var(--primary-color);
            border-radius: 50%;
            opacity: 0.3;
        }
        
        .stat-badge span {
            font-size: 1.8rem;
            line-height: 1;
            font-weight: 900;
        }
        
        .historical-photo {
            text-align: center;
            margin: 2rem auto;
            max-width: 500px;
            border: 10px solid var(--gold-color);
            padding: 5px;
            background-color: #fff;
        }
        
        .historical-photo img {
            max-width: 100%;
            height: auto;
            display: block;
        }
        
        .historical-photo-caption {
            background-color: var(--gold-color);
            padding: 0.5rem;
            font-style: italic;
            color: var(--primary-color);
            text-align: center;
            margin-top: 0;
        }
        
        .acervo-title {
            text-align: center;
            font-size: 2.2rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .acervo-subtitle {
            text-align: center;
            font-style: italic;
            margin-bottom: 2rem;
        }
        
        .search-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
        }
        
        .search-box {
            display: flex;
            width: 100%;
            max-width: 600px;
        }
        
        .search-input {
            flex-grow: 1;
            padding: 0.8rem 1rem;
            border: 1px solid #ddd;
            border-radius: 30px 0 0 30px;
            font-family: 'Playfair Display', serif;
            font-size: 1rem;
        }
        
        .search-button {
            background-color: var(--gold-color);
            color: var(--primary-color);
            border: none;
            padding: 0.8rem 1.5rem;
            font-weight: bold;
            border-radius: 0 30px 30px 0;
            cursor: pointer;
            font-family: 'Playfair Display', serif;
            font-size: 1rem;
        }
        
        .filter-container {
            display: flex;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .filter-button {
            background-color: #fff;
            border: 1px solid var(--gold-color);
            padding: 0.5rem 1.5rem;
            font-family: 'Playfair Display', serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-button.active {
            background-color: var(--gold-color);
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .filter-button:hover {
            background-color: var(--gold-color);
            color: var(--primary-color);
        }
        
        .sort-container {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1rem;
        }
        
        .sort-select {
            padding: 0.5rem;
            border: 1px solid #ddd;
            font-family: 'Playfair Display', serif;
        }
        
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 0;
        }
        
        .document-card {
            border: 1px solid #e0e0e0;
            background-color: #fff;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
            margin-bottom: 0;
        }
        
        .document-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .document-code {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: var(--gold-color);
            color: var(--primary-color);
            padding: 2px 6px;
            font-size: 0.8rem;
            font-weight: bold;
            border-radius: 3px;
        }
        
        .document-card h3 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
            margin-top: 1.5rem;
        }
        
        .document-author {
            font-style: italic;
            margin-bottom: 0.3rem;
            color: #666;
        }
        
        .document-year {
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--gold-color);
            display: block;
            clear: both;
            margin-top: 0.5rem;
        }
        
        .document-card p {
            flex-grow: 1;
            margin-bottom: 1rem;
        }
        
        .document-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: auto;
        }
        
        .document-type {
            color: #666;
            font-style: italic;
        }
        
        .read-button {
            background-color: var(--gold-color);
            color: var(--primary-color);
            border: none;
            padding: 0.5rem 1rem;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            font-family: 'Playfair Display', serif;
            transition: all 0.3s ease;
        }
        
        .read-button:hover {
            background-color: var(--primary-color);
            color: var(--gold-color);
        }
        
        .toggle-button {
            background-color: var(--gold-color);
            color: #fff;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 1.5rem auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            position: relative;
            z-index: 10;
        }
        
        .toggle-button:hover {
            background-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.3);
        }
        
        .recolher-button {
            display: none;
            margin-top: 1.5rem;
            margin-left: auto;
            margin-right: auto;
        }
        
        .timeline-section {
            margin: 3rem 0;
            padding: 2rem;
            border: 1px solid #e0e0e0;
            background-color: #fff;
            overflow: hidden;
        }
        
        .timeline-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: var(--primary-color);
        }
        
        .horizontal-timeline {
            position: relative;
            overflow-x: auto;
            padding: 2rem 0;
        }
        
        .timeline-track {
            display: flex;
            gap: 2rem;
            min-width: max-content;
            padding: 0 1rem;
        }
        
        .timeline-item-horizontal {
            flex: 0 0 auto;
            opacity: 0;
            animation: slideInFromLeft 0.8s ease forwards;
        }
        
        .timeline-content-horizontal {
            background: #fff;
            border: 2px solid var(--gold-color);
            border-radius: 10px;
            padding: 1.5rem;
            width: 250px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .timeline-content-horizontal:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
        }
        
        .timeline-year-horizontal {
            background: var(--gold-color);
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.2rem;
            padding: 0.5rem;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 1rem;
        }
        
        .timeline-text-horizontal {
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
            flex-grow: 1;
        }
        
        .timeline-author-horizontal {
            font-style: italic;
            color: #666;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .timeline-tag-horizontal {
            background: var(--primary-color);
            color: #fff;
            padding: 0.2rem 0.5rem;
            border-radius: 3px;
            font-size: 0.8rem;
            align-self: flex-start;
            margin-bottom: 1rem;
        }
        
        .timeline-button-horizontal {
            background: var(--gold-color);
            color: var(--primary-color);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
            font-family: 'Playfair Display', serif;
        }
        
        .timeline-button-horizontal:hover {
            background: var(--primary-color);
            color: var(--gold-color);
        }
        
        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        #hidden-documents {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
            transition: max-height 0.6s ease, opacity 0.4s ease;
        }
        
        #hidden-documents.expanded {
            max-height: 10000px;
            opacity: 1;
        }
        
        .video-section {
            margin: 3rem 0;
            padding: 2rem;
            border: 1px solid #e0e0e0;
            background-color: #fff;
        }
        
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .video-card {
            border: 1px solid #e0e0e0;
            background-color: #fff;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            height: 100%;
            position: relative;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            opacity: 0;
            animation: fadeIn 0.5s ease forwards;
        }
        
        .video-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .video-card h3 {
            margin-bottom: 1rem;
            color: var(--primary-color);
        }
        
        .video-thumbnail {
            position: relative;
            width: 100%;
            padding-top: 56.25%;
            overflow: hidden;
            border-radius: 5px;
            margin-bottom: 1rem;
            display: block;
        }
        
        .video-thumbnail img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .video-thumbnail:hover img {
            transform: scale(1.05);
        }
        
        .play-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background-color: rgba(212, 180, 95, 0.8);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 1.5rem;
            transition: all 0.3s ease;
        }
        
        .video-thumbnail:hover .play-button {
            background-color: rgba(74, 44, 42, 0.8);
            transform: translate(-50%, -50%) scale(1.1);
        }
        
        .protected-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary-color);
            color: #fff;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 0.8rem;
        }
        
        .video-synopsis {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f9f9f9;
            border-left: 3px solid var(--gold-color);
            font-style: italic;
            color: #555;
            line-height: 1.5;
            border-radius: 0 5px 5px 0;
            flex-grow: 1;
            display: block;
            clear: both;
            margin-top: 0.5rem;
        }
        
        .footer {
            background-color: var(--primary-color);
            color: #fff;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        
        .footer p {
            margin-bottom: 1rem;
        }
        
        .footer a {
            color: var(--gold-color);
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        /* CSS PARA MODO DE EDI√á√ÉO */
        .edit-mode-active {
            position: relative;
        }
        
        .edit-mode-active [contenteditable="true"] {
            border: 2px dashed var(--gold-color) !important;
            background-color: rgba(212, 180, 95, 0.1) !important;
            padding: 2px !important;
            min-height: 20px !important;
            transition: all 0.3s ease;
        }
        
        .edit-mode-active [contenteditable="true"]:hover {
            background-color: rgba(212, 180, 95, 0.2) !important;
            box-shadow: 0 0 10px rgba(212, 180, 95, 0.5) !important;
        }
        
        .edit-mode-active [contenteditable="true"]:focus {
            outline: 3px solid var(--gold-color) !important;
            background-color: rgba(212, 180, 95, 0.3) !important;
        }
        
        .edit-mode-active img {
            border: 2px dashed #ff6b6b !important;
            cursor: pointer !important;
            transition: all 0.3s ease;
        }
        
        .edit-mode-active img:hover {
            border-color: #ff5252 !important;
            box-shadow: 0 0 15px rgba(255, 107, 107, 0.5) !important;
            transform: scale(1.02) !important;
        }
        
        .edit-mode-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, var(--gold-color), #e6c87d);
            color: var(--primary-color);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 9999;
            animation: pulse 2s infinite;
            border: 2px solid var(--primary-color);
        }
        
        .edit-mode-controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--primary-color);
            color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 9999;
            display: flex;
            gap: 10px;
            flex-direction: column;
        }
        
        .edit-control-btn {
            background: var(--gold-color);
            color: var(--primary-color);
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Playfair Display', serif;
            transition: all 0.3s ease;
        }
        
        .edit-control-btn:hover {
            background: #e6c87d;
            transform: translateY(-2px);
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .image-upload-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }
        
        .image-upload-dialog {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
            max-width: 400px;
            width: 90%;
        }
        
        .image-upload-dialog h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
        }
        
        .image-upload-dialog input[type="file"] {
            margin: 15px 0;
            padding: 10px;
            border: 2px dashed var(--gold-color);
            border-radius: 5px;
            width: 100%;
        }
        
        .image-upload-dialog button {
            margin: 5px;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Playfair Display', serif;
            font-weight: bold;
        }
        
        .btn-upload {
            background: var(--gold-color);
            color: var(--primary-color);
        }
        
        .btn-cancel {
            background: #ccc;
            color: #333;
        }
        
        /* Indicador de salvamento */
        .save-indicator {
            position: fixed;
            top: 80px;
            right: 20px;
            background: #4CAF50;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 9999;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease;
        }
        
        .save-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .save-indicator.error {
            background: #f44336;
        }
        
        .save-indicator.warning {
            background: #ff9800;
        }
        
        /* Notifica√ß√£o de rebuild */
        .rebuild-notification {
            position: fixed;
            top: 140px;
            right: 20px;
            background: linear-gradient(45deg, #2196F3, #64B5F6);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 9999;
            animation: slideInRight 0.5s ease;
            border: 2px solid #1976D2;
            text-align: center;
            min-width: 250px;
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Modal de configura√ß√£o GitHub */
        .github-config-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10001;
        }
        
        .github-config-dialog {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            max-width: 500px;
            width: 90%;
        }
        
        .github-config-dialog h3 {
            color: var(--primary-color);
            margin-bottom: 20px;
            text-align: center;
        }
        
        .config-field {
            margin-bottom: 15px;
        }
        
        .config-field label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--primary-color);
        }
        
        .config-field input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-family: 'Playfair Display', serif;
        }
        
        .config-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .btn-save-config {
            background: var(--gold-color);
            color: var(--primary-color);
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Playfair Display', serif;
            font-weight: bold;
        }
        
        .btn-cancel-config {
            background: #ccc;
            color: #333;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Playfair Display', serif;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .nav-bar {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-bar a {
                margin: 0.5rem 0;
            }
            
            .intro h1 {
                font-size: 2rem;
            }
            
            .intro h2 {
                font-size: 1.5rem;
            }
            
            .stylized-r {
                position: relative;
                left: auto;
                top: auto;
                transform: none;
                margin-right: 15px;
                width: 50px;
                height: 50px;
            }
            
            .stylized-r:hover {
                transform: scale(1.1);
            }
            
            .r-letter {
                font-size: 45px;
            }
            
            .r-shadow {
                width: 40px;
                height: 40px;
            }
            
            .intro-header {
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .intro-header h1 {
                font-size: 1.8rem;
                text-align: center;
            }
            
            .welcome-message {
                position: relative;
                margin-top: 15px;
                font-size: 1.2rem;
            }
            
            .stat-badge {
                position: relative;
                margin: 1rem auto;
                right: 0;
                transform: none;
            }
            
            .search-container {
                flex-direction: column;
            }
            
            .search-input {
                border-radius: 30px;
                margin-bottom: 0.5rem;
            }
            
            .search-button {
                border-radius: 30px;
            }
            
            .filter-container {
                flex-direction: column;
                align-items: center;
            }
            
            .filter-button {
                width: 100%;
                margin-bottom: 0.5rem;
            }
            
            .documents-grid {
                grid-template-columns: 1fr;
            }
            
            .timeline-content-horizontal {
                width: 200px;
                min-height: 180px;
            }
            
            .edit-mode-controls {
                bottom: 10px;
                right: 10px;
                padding: 10px;
            }
            
            .edit-control-btn {
                padding: 6px 12px;
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <a href="#intro">In√≠cio</a>
        <a href="#timeline">Linha do Tempo</a>
        <a href="#acervo">Acervo</a>
    </div>
    
    <div class="container">
        <section id="intro" class="intro">
            <div class="intro-header">
                <div class="stylized-r" id="password-r">
                    <div class="r-letter">R</div>
                    <div class="r-shadow"></div>
                </div>
                <h1>Biblioteca Digital Reinaldo Duarte Castanheira</h1>
                <div class="stat-badge">
                    <span>70+</span>
                    Obras
                </div>
                <div id="welcome-message" class="welcome-message"></div>
            </div>
            
            <p>Acervo de Hist√≥rias, Contos, Fotos, Livros e V√≠deos que resolvi guardar em arquivos digitais. Assim fazendo, tenho condi√ß√µes de preservar os guardados, evitando que caiam no esquecimento, nos sebos e/ou descarte nos lixos. Com este prop√≥sito possibilito que outras pessoas possam apreciar e revisitar quantos momentos que guardei.</p>
            <p>Alguns arquivos de livre acesso e outros que, dado o conte√∫do privado ‚Äì restrito a grupos espec√≠ficos.</p>
            
            <div class="historical-photo">
                <img src="https://via.placeholder.com/500x300/d4b45f/4a2c2a?text=√Ålvaro+e+Maria+-+meus+pais" alt="Foto hist√≥rica da cidade">
                <p class="historical-photo-caption">√Ålvaro e Maria - meus pais</p>
            </div>
        </section>
        
        <section id="timeline" class="timeline-section">
            <h2 class="timeline-title">Linha do Tempo</h2>
            
            <div class="horizontal-timeline">
                <div class="timeline-track">
                    <div class="timeline-item-horizontal" style="animation-delay: 0.1s;">
                        <div class="timeline-content-horizontal">
                            <div class="timeline-year-horizontal">1878</div>
                            <div class="timeline-text-horizontal">Carta de meu bisav√¥ Jos√© Antonio Duraes Castanheira</div>
                            <div class="timeline-author-horizontal">Francisco Augusto Dur√£es Castanheira</div>
                            <div class="timeline-tag-horizontal">Documento</div>
                            <a href="#" class="timeline-button-horizontal">Ler obra</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item-horizontal" style="animation-delay: 0.2s;">
                        <div class="timeline-content-horizontal">
                            <div class="timeline-year-horizontal">1900</div>
                            <div class="timeline-text-horizontal">O Livro da Vov√≥ Magdalena</div>
                            <div class="timeline-author-horizontal">Maria Magdalena Moura Costa Castanheira</div>
                            <div class="timeline-tag-horizontal">Livro</div>
                            <a href="#" class="timeline-button-horizontal">Ler obra</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item-horizontal" style="animation-delay: 0.3s;">
                        <div class="timeline-content-horizontal">
                            <div class="timeline-year-horizontal">2012</div>
                            <div class="timeline-text-horizontal">Monsenhor Moreira - Uma vida a servi√ßo do Reino de Deus</div>
                            <div class="timeline-author-horizontal">Luiza Izabel Biagioni</div>
                            <div class="timeline-tag-horizontal">Livro</div>
                            <a href="#" class="timeline-button-horizontal">Ler obra</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item-horizontal" style="animation-delay: 0.4s;">
                        <div class="timeline-content-horizontal">
                            <div class="timeline-year-horizontal">2021</div>
                            <div class="timeline-text-horizontal">O segredo</div>
                            <div class="timeline-author-horizontal">Reinaldo Duarte Castanheira</div>
                            <div class="timeline-tag-horizontal">Conto</div>
                            <a href="#" class="timeline-button-horizontal">Ler obra</a>
                        </div>
                    </div>
                    
                    <div class="timeline-item-horizontal" style="animation-delay: 0.5s;">
                        <div class="timeline-content-horizontal">
                            <div class="timeline-year-horizontal">2020</div>
                            <div class="timeline-text-horizontal">Antologia</div>
                            <div class="timeline-author-horizontal">Reuber Lana Antoniazzi</div>
                            <div class="timeline-tag-horizontal">Antologia</div>
                            <a href="#" class="timeline-button-horizontal">Ler obra</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="acervo">
            <h2 class="acervo-title">Acervo Digital</h2>
            <p class="acervo-subtitle">Explore nossa cole√ß√£o de documentos hist√≥ricos, livros e mem√≥rias</p>
            
            <div class="search-container">
                <div class="search-box">
                    <input type="text" class="search-input" placeholder="Buscar por t√≠tulo, autor, ano ou c√≥digo...">
                    <button class="search-button">Buscar</button>
                </div>
            </div>
            
            <div class="filter-container">
                <button class="filter-button active" data-filter="all">Todos</button>
                <button class="filter-button" data-filter="livro">Livros</button>
                <button class="filter-button" data-filter="documento">Documentos</button>
                <button class="filter-button" data-filter="conto">Contos</button>
                <button class="filter-button" data-filter="antologia">Antologias</button>
                <button class="filter-button" data-filter="poema">Poemas</button>
                <button class="filter-button" data-filter="m√≠dia">M√≠dia</button>
            </div>
            
            <div class="sort-container">
                <select class="sort-select">
                    <option value="newest">Mais recentes</option>
                    <option value="oldest">Mais antigos</option>
                    <option value="title">Por t√≠tulo</option>
                    <option value="author">Por autor</option>
                </select>
            </div>
            
            <div class="documents-grid">
                <div class="document-card">
                    <div class="document-code">323</div>
                    <h3>Monsenhor Moreira - Uma vida a servi√ßo do Reino de Deus</h3>
                    <div class="document-author">Luiza Izabel Biagioni</div>
                    <div class="document-year">2012</div>
                    <p>Sucinta biografia de Monsenhor Moreira, relatando sua trajet√≥ria religiosa e contribui√ß√µes para a comunidade cat√≥lica local.</p>
                    <div class="document-footer">
                        <span class="document-type">Livro</span>
                        <a href="#" class="read-button">Ler</a>
                    </div>
                </div>
                
                <div class="document-card">
                    <div class="document-code">324</div>
                    <h3>O segredo</h3>
                    <div class="document-author">Reinaldo Duarte Castanheira</div>
                    <div class="document-year">2021</div>
                    <p>Reflex√µes filos√≥ficas sobre a vida e os segredos que carregamos, uma narrativa significativa sobre a condi√ß√£o humana.</p>
                    <div class="document-footer">
                        <span class="document-type">Conto</span>
                        <a href="#" class="read-button">Ler</a>
                    </div>
                </div>
                
                <div class="document-card">
                    <div class="document-code">325</div>
                    <h3>Antologia</h3>
                    <div class="document-author">Reuber Lana Antoniazzi</div>
                    <div class="document-year">2020</div>
                    <p>A vida √© feita de degraus como uma pir√¢mide que tem a pretens√£o de alcan√ßar o infinito. √â quando a F√™nix sobrevoa Lafaiete atrav√©s dos tempos e deixa o legado para o futuro.</p>
                    <div class="document-footer">
                        <span class="document-type">Antologia</span>
                        <a href="#" class="read-button">Ler</a>
                    </div>
                </div>
            </div>
            
            <div id="videos-container" class="video-grid">
                <!-- Os v√≠deos ser√£o inseridos aqui pelo JavaScript -->
            </div>
            
            <button id="explore-button" class="toggle-button">+</button>
            <button id="recolher-button" class="toggle-button recolher-button">-</button>
            
            <div id="hidden-documents">
                <!-- Documentos adicionais ser√£o inseridos aqui -->
            </div>
        </section>
    </div>
    
    <footer class="footer">
        <p>&copy; 2024 Biblioteca Digital Reinaldo Duarte Castanheira. Todos os direitos reservados.</p>
        <p>Preservando mem√≥rias e hist√≥rias para as futuras gera√ß√µes.</p>
        <p><a href="mailto:contato@bibliotecacastanheira.com">contato@bibliotecacastanheira.com</a></p>
    </footer>

    <script>
        // ========================================
        // SERVIDOR FANTASMA - CONFIGURA√á√ÉO GITHUB
        // ========================================
        
        // CONFIGURA√á√ïES DO GITHUB (CONFIGURE AQUI)
        let GITHUB_CONFIG = {
            owner: '',                    // SEU USU√ÅRIO GITHUB
            repo: '',                     // NOME DO REPOSIT√ìRIO  
            branch: 'main',               // BRANCH PRINCIPAL
            token: '',                    // PERSONAL ACCESS TOKEN
            filename: 'index.html'        // ARQUIVO A SER ATUALIZADO
        };
        
        // Verificar se configura√ß√£o existe no localStorage
        function loadGitHubConfig() {
            const saved = localStorage.getItem('github_config');
            if (saved) {
                GITHUB_CONFIG = { ...GITHUB_CONFIG, ...JSON.parse(saved) };
            }
        }
        
        // Salvar configura√ß√£o no localStorage
        function saveGitHubConfig() {
            localStorage.setItem('github_config', JSON.stringify(GITHUB_CONFIG));
        }
        
        // ========================================
        // MODO DE EDI√á√ÉO - FUNCIONALIDADE COMPLETA
        // ========================================
        
        let editModeActive = false;
        let currentEditingImage = null;
        let originalContent = new Map();
        
        document.addEventListener('DOMContentLoaded', function() {
            loadGitHubConfig();
            
            const passwordR = document.getElementById('password-r');
            const welcomeMessage = document.getElementById('welcome-message');
            
            passwordR.addEventListener('click', function() {
                const password = prompt('Digite a senha:');
                if (password === '24042003') {
                    if (!editModeActive) {
                        // Verificar configura√ß√£o GitHub antes de ativar
                        if (!GITHUB_CONFIG.owner || !GITHUB_CONFIG.repo || !GITHUB_CONFIG.token) {
                            showGitHubConfigModal();
                            return;
                        }
                        
                        activateEditMode();
                        welcomeMessage.textContent = 'Modo de Edi√ß√£o Ativado!';
                    } else {
                        deactivateEditMode();
                        welcomeMessage.textContent = 'Modo de Edi√ß√£o Desativado!';
                    }
                    welcomeMessage.classList.add('show');
                    
                    setTimeout(function() {
                        welcomeMessage.classList.remove('show');
                    }, 3000);
                }
            });
        });
        
        // ========================================
        // MODAL DE CONFIGURA√á√ÉO GITHUB
        // ========================================
        
        function showGitHubConfigModal() {
            const modal = document.createElement('div');
            modal.className = 'github-config-modal';
            modal.id = 'github-config-modal';
            
            modal.innerHTML = `
                <div class="github-config-dialog">
                    <h3>üîß Configura√ß√£o do Servidor Fantasma</h3>
                    <p style="margin-bottom: 20px; color: #666; text-align: center;">
                        Configure sua conta GitHub para salvar altera√ß√µes automaticamente
                    </p>
                    
                    <div class="config-field">
                        <label>Usu√°rio GitHub:</label>
                        <input type="text" id="github-owner" placeholder="seu-usuario" value="${GITHUB_CONFIG.owner}">
                    </div>
                    
                    <div class="config-field">
                        <label>Nome do Reposit√≥rio:</label>
                        <input type="text" id="github-repo" placeholder="biblioteca-digital" value="${GITHUB_CONFIG.repo}">
                    </div>
                    
                    <div class="config-field">
                        <label>Branch:</label>
                        <input type="text" id="github-branch" placeholder="main" value="${GITHUB_CONFIG.branch}">
                    </div>
                    
                    <div class="config-field">
                        <label>Personal Access Token:</label>
                        <input type="password" id="github-token" placeholder="ghp_xxxxxxxxxxxx" value="${GITHUB_CONFIG.token}">
                        <small style="color: #666;">
                            <a href="https://github.com/settings/tokens" target="_blank">Criar token aqui</a>
                        </small>
                    </div>
                    
                    <div class="config-field">
                        <label>Nome do Arquivo:</label>
                        <input type="text" id="github-filename" placeholder="index.html" value="${GITHUB_CONFIG.filename}">
                    </div>
                    
                    <div class="config-buttons">
                        <button class="btn-save-config" onclick="saveGitHubConfigFromModal()">üíæ Salvar e Ativar</button>
                        <button class="btn-cancel-config" onclick="closeGitHubConfigModal()">‚ùå Cancelar</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function saveGitHubConfigFromModal() {
            GITHUB_CONFIG.owner = document.getElementById('github-owner').value;
            GITHUB_CONFIG.repo = document.getElementById('github-repo').value;
            GITHUB_CONFIG.branch = document.getElementById('github-branch').value;
            GITHUB_CONFIG.token = document.getElementById('github-token').value;
            GITHUB_CONFIG.filename = document.getElementById('github-filename').value;
            
            if (!GITHUB_CONFIG.owner || !GITHUB_CONFIG.repo || !GITHUB_CONFIG.token) {
                alert('Por favor, preencha todos os campos obrigat√≥rios!');
                return;
            }
            
            saveGitHubConfig();
            closeGitHubConfigModal();
            
            // Ativar modo de edi√ß√£o
            activateEditMode();
            const welcomeMessage = document.getElementById('welcome-message');
            welcomeMessage.textContent = 'Servidor Fantasma Configurado!';
            welcomeMessage.classList.add('show');
            
            setTimeout(function() {
                welcomeMessage.classList.remove('show');
            }, 3000);
        }
        
        function closeGitHubConfigModal() {
            const modal = document.getElementById('github-config-modal');
            if (modal) modal.remove();
        }
        
        // ========================================
        // FUN√á√ïES DO MODO DE EDI√á√ÉO
        // ========================================
        
        function activateEditMode() {
            editModeActive = true;
            document.body.classList.add('edit-mode-active');
            
            const editableElements = document.querySelectorAll('h1, h2, h3, h4, h5, h6, p, span:not(.document-code), .document-author, .document-year, .timeline-text-horizontal, .timeline-author-horizontal, .intro p, .historical-photo-caption');
            
            editableElements.forEach(element => {
                if (!element.closest('.document-code') && 
                    !element.closest('.play-button') && 
                    !element.closest('.protected-badge') &&
                    !element.closest('.stat-badge') &&
                    !element.closest('button') &&
                    !element.closest('a')) {
                    
                    element.setAttribute('contenteditable', 'true');
                    originalContent.set(element, element.innerHTML);
                }
            });
            
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.addEventListener('click', handleImageEdit);
                img.style.cursor = 'pointer';
                originalContent.set(img, img.src);
            });
            
            createEditModeIndicator();
            createEditModeControls();
        }
        
        function deactivateEditMode() {
            editModeActive = false;
            document.body.classList.remove('edit-mode-active');
            
            const editableElements = document.querySelectorAll('[contenteditable="true"]');
            editableElements.forEach(element => {
                element.removeAttribute('contenteditable');
            });
            
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.removeEventListener('click', handleImageEdit);
                img.style.cursor = '';
            });
            
            removeEditModeIndicator();
            removeEditModeControls();
            removeSaveIndicator();
        }
        
        function createEditModeIndicator() {
            const indicator = document.createElement('div');
            indicator.className = 'edit-mode-indicator';
            indicator.id = 'edit-mode-indicator';
            indicator.innerHTML = 'üé≠ SERVIDOR FANTASMA ATIVO';
            document.body.appendChild(indicator);
        }
        
        function createEditModeControls() {
            const controls = document.createElement('div');
            controls.className = 'edit-mode-controls';
            controls.id = 'edit-mode-controls';
            controls.innerHTML = `
                <button class="edit-control-btn" onclick="saveChangesToGitHub()">üíæ Salvar no Servidor</button>
                <button class="edit-control-btn" onclick="undoChanges()">‚Ü∂ Desfazer Tudo</button>
                <button class="edit-control-btn" onclick="viewGitHubCommits()">üìÅ Ver Hist√≥rico</button>
                <button class="edit-control-btn" onclick="showGitHubConfigModal()">‚öôÔ∏è Configura√ß√µes</button>
                <button class="edit-control-btn" onclick="deactivateEditMode()">‚ùå Sair do Modo Edi√ß√£o</button>
            `;
            document.body.appendChild(controls);
        }
        
        function removeEditModeIndicator() {
            const indicator = document.getElementById('edit-mode-indicator');
            if (indicator) indicator.remove();
        }
        
        function removeEditModeControls() {
            const controls = document.getElementById('edit-mode-controls');
            if (controls) controls.remove();
        }
        
        // ========================================
        // SISTEMA DE INDICADORES
        // ========================================
        
        function showSaveIndicator(message, type = 'success') {
            removeSaveIndicator();
            
            const indicator = document.createElement('div');
            indicator.className = 'save-indicator';
            indicator.id = 'save-indicator';
            indicator.textContent = message;
            
            if (type === 'error') {
                indicator.classList.add('error');
            } else if (type === 'warning') {
                indicator.classList.add('warning');
            }
            
            document.body.appendChild(indicator);
            
            setTimeout(() => {
                indicator.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                indicator.classList.remove('show');
                setTimeout(() => {
                    removeSaveIndicator();
                }, 300);
            }, 4000);
        }
        
        function removeSaveIndicator() {
            const indicator = document.getElementById('save-indicator');
            if (indicator) indicator.remove();
        }
        
        function showRebuildNotification() {
            const notification = document.createElement('div');
            notification.className = 'rebuild-notification';
            notification.innerHTML = `
                üöÄ Netlify atualizando...<br>
                <small>Mudan√ßas vis√≠veis em ~2 minutos</small>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 10000);
        }
        
        // ========================================
        // SERVIDOR FANTASMA - GITHUB API
        // ========================================
        
        async function saveChangesToGitHub() {
            try {
                showSaveIndicator('üîÑ Conectando ao servidor...', 'warning');
                
                // 1. Detectar altera√ß√µes
                const changes = detectChanges();
                if (changes.length === 0) {
                    showSaveIndicator('‚ÑπÔ∏è Nenhuma altera√ß√£o detectada');
                    return;
                }
                
                showSaveIndicator('üìù Preparando altera√ß√µes...');
                
                // 2. Obter conte√∫do HTML atual
                const htmlContent = document.documentElement.outerHTML;
                
                // 3. Obter SHA atual do arquivo
                showSaveIndicator('üîç Verificando arquivo atual...');
                const currentFile = await getFileFromGitHub();
                
                // 4. Fazer commit
                showSaveIndicator('üíæ Salvando no servidor...');
                const result = await commitToGitHub(htmlContent, currentFile.sha);
                
                if (result.commit) {
                    showSaveIndicator('‚úÖ Salvo com sucesso!');
                    showRebuildNotification();
                    
                    // Atualizar conte√∫do original
                    updateOriginalContent();
                    
                    console.log('Commit realizado:', result.commit.html_url);
                } else {
                    throw new Error(result.message || 'Erro desconhecido');
                }
                
            } catch (error) {
                console.error('Erro ao salvar:', error);
                showSaveIndicator(`‚ùå Erro: ${error.message}`, 'error');
            }
        }
        
        async function getFileFromGitHub() {
            const url = `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.filename}`;
            
            const response = await fetch(url, {
                headers: {
                    'Authorization': `token ${GITHUB_CONFIG.token}`,
                    'Accept': 'application/vnd.github.v3+json'
                }
            });
            
            if (!response.ok) {
                throw new Error(`Erro ao obter arquivo: ${response.status} ${response.statusText}`);
            }
            
            return await response.json();
        }
        
        async function commitToGitHub(content, sha) {
            const url = `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${GITHUB_CONFIG.filename}`;
            
            const commitMessage = `üìù Atualiza√ß√£o da biblioteca - ${new Date().toLocaleString('pt-BR')}`;
            
            const response = await fetch(url, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${GITHUB_CONFIG.token}`,
                    'Content-Type': 'application/json',
                    'Accept': 'application/vnd.github.v3+json'
                },
                body: JSON.stringify({
                    message: commitMessage,
                    content: btoa(unescape(encodeURIComponent(content))),
                    sha: sha,
                    branch: GITHUB_CONFIG.branch
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || `HTTP ${response.status}`);
            }
            
            return await response.json();
        }
        
        function detectChanges() {
            const changes = [];
            
            // Verificar textos editados
            const editedElements = document.querySelectorAll('[contenteditable="true"]');
            editedElements.forEach(element => {
                const original = originalContent.get(element);
                const current = element.innerHTML;
                if (original !== current) {
                    changes.push({
                        type: 'text',
                        element: element.tagName + (element.className ? '.' + element.className : ''),
                        original: original,
                        new: current
                    });
                }
            });
            
            // Verificar imagens modificadas
            const modifiedImages = document.querySelectorAll('img[data-modified="true"]');
            modifiedImages.forEach(img => {
                const original = originalContent.get(img);
                changes.push({
                    type: 'image',
                    element: 'img',
                    original: original,
                    new: img.src
                });
            });
            
            return changes;
        }
        
        function updateOriginalContent() {
            // Atualizar conte√∫do original ap√≥s salvar
            const editedElements = document.querySelectorAll('[contenteditable="true"]');
            editedElements.forEach(element => {
                originalContent.set(element, element.innerHTML);
            });
            
            document.querySelectorAll('img').forEach(img => {
                originalContent.set(img, img.src);
                img.removeAttribute('data-modified');
            });
        }
        
        // ========================================
        // UPLOAD DE IMAGENS VIA GITHUB
        // ========================================
        
        function handleImageEdit(event) {
            if (!editModeActive) return;
            
            event.preventDefault();
            event.stopPropagation();
            
            currentEditingImage = event.target;
            showImageUploadDialog();
        }
        
        function showImageUploadDialog() {
            const overlay = document.createElement('div');
            overlay.className = 'image-upload-overlay';
            overlay.id = 'image-upload-overlay';
            
            overlay.innerHTML = `
                <div class="image-upload-dialog">
                    <h3>üñºÔ∏è Substituir Imagem</h3>
                    <p>Selecione uma nova imagem para substituir:</p>
                    <input type="file" id="image-file-input" accept="image/*">
                    <div>
                        <button class="btn-upload" onclick="uploadImageToGitHub()">üì§ Substituir</button>
                        <button class="btn-cancel" onclick="closeImageDialog()">‚ùå Cancelar</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(overlay);
        }
        
        async function uploadImageToGitHub() {
            const fileInput = document.getElementById('image-file-input');
            const file = fileInput.files[0];
            
            if (!file) {
                alert('Por favor, selecione uma imagem.');
                return;
            }
            
            try {
                showSaveIndicator('üì§ Fazendo upload da imagem...');
                
                // 1. Converter para Base64
                const base64Content = await fileToBase64(file);
                
                // 2. Gerar nome √∫nico
                const timestamp = Date.now();
                const extension = file.name.split('.').pop();
                const filename = `images/${timestamp}_${file.name.replace(/[^a-zA-Z0-9.-]/g, '_')}`;
                
                // 3. Upload para GitHub
                const result = await uploadFileToGitHub(filename, base64Content);
                
                if (result.content) {
                    // 4. Atualizar imagem na p√°gina
                    const imageUrl = `https://raw.githubusercontent.com/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/${GITHUB_CONFIG.branch}/${filename}`;
                    
                    if (currentEditingImage) {
                        currentEditingImage.src = imageUrl;
                        currentEditingImage.setAttribute('data-modified', 'true');
                    }
                    
                    showSaveIndicator('‚úÖ Imagem substitu√≠da com sucesso!');
                    closeImageDialog();
                } else {
                    throw new Error('Falha no upload');
                }
                
            } catch (error) {
                console.error('Erro no upload:', error);
                showSaveIndicator(`‚ùå Erro no upload: ${error.message}`, 'error');
            }
        }
        
        async function uploadFileToGitHub(filename, base64Content) {
            const url = `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/contents/${filename}`;
            
            const response = await fetch(url, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${GITHUB_CONFIG.token}`,
                    'Content-Type': 'application/json',
                    'Accept': 'application/vnd.github.v3+json'
                },
                body: JSON.stringify({
                    message: `üì∑ Upload de imagem: ${filename}`,
                    content: base64Content,
                    branch: GITHUB_CONFIG.branch
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || `HTTP ${response.status}`);
            }
            
            return await response.json();
        }
        
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    // Remover o prefixo "data:image/...;base64,"
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = error => reject(error);
            });
        }
        
        function closeImageDialog() {
            const overlay = document.getElementById('image-upload-overlay');
            if (overlay) overlay.remove();
            currentEditingImage = null;
        }
        
        // ========================================
        // HIST√ìRICO DE COMMITS (SIMULA BACKUPS)
        // ========================================
        
        async function viewGitHubCommits() {
            try {
                showSaveIndicator('üìÅ Carregando hist√≥rico...');
                
                const url = `https://api.github.com/repos/${GITHUB_CONFIG.owner}/${GITHUB_CONFIG.repo}/commits?path=${GITHUB_CONFIG.filename}&per_page=10`;
                
                const response = await fetch(url, {
                    headers: {
                        'Authorization': `token ${GITHUB_CONFIG.token}`,
                        'Accept': 'application/vnd.github.v3+json'
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`Erro ao obter hist√≥rico: ${response.status}`);
                }
                
                const commits = await response.json();
                
                if (commits.length > 0) {
                    let commitList = 'üìÅ Hist√≥rico de Altera√ß√µes:\n\n';
                    commits.forEach((commit, index) => {
                        const date = new Date(commit.commit.author.date).toLocaleString('pt-BR');
                        const message = commit.commit.message;
                        const author = commit.commit.author.name;
                        
                        commitList += `${index + 1}. ${message}\n`;
                        commitList += `   üìÖ ${date}\n`;
                        commitList += `   üë§ ${author}\n`;
                        commitList += `   üîó ${commit.html_url}\n\n`;
                    });
                    
                    alert(commitList);
                } else {
                    alert('üìÅ Nenhum hist√≥rico encontrado.');
                }
                
                removeSaveIndicator();
                
            } catch (error) {
                console.error('Erro ao obter hist√≥rico:', error);
                showSaveIndicator(`‚ùå Erro: ${error.message}`, 'error');
            }
        }
        
        // ========================================
        // FUN√á√ÉO DESFAZER
        // ========================================
        
        function undoChanges() {
            if (confirm('üîÑ Tem certeza que deseja desfazer todas as altera√ß√µes?')) {
                // Restaurar textos
                const editedElements = document.querySelectorAll('[contenteditable="true"]');
                editedElements.forEach(element => {
                    const original = originalContent.get(element);
                    if (original) {
                        element.innerHTML = original;
                    }
                });
                
                // Restaurar imagens
                const images = document.querySelectorAll('img');
                images.forEach(img => {
                    const original = originalContent.get(img);
                    if (original && img.getAttribute('data-modified')) {
                        img.src = original;
                        img.removeAttribute('data-modified');
                    }
                });
                
                showSaveIndicator('‚Ü∂ Altera√ß√µes desfeitas!');
            }
        }
        
        // ========================================
        // FUNCIONALIDADE DE V√çDEOS
        // ========================================
        
        const videos = [
            {
                titulo: "Picnic na Fazenda Castanheira",
                id: "2GDY20aWciM",
                protegido: true,
                codigo: "101",
                ano: "1985",
                sinopse: "Fomos, doze meninos e meninas, passear na cachoeira do Rio Paraopeba, na Fazenda de meu Pai. Que bela recorda√ß√£o."
            },
            {
                titulo: "Picnic no Quintal da Casa de nosso Pai",
                id: "-OCvEII3Xyg",
                protegido: true,
                codigo: "102",
                ano: "1985",
                sinopse: "Outra vez, num grupo de 14 meninos e meninas fazer um inesquec√≠vel Picnic na regi√£o onde hoje √© o Bairro Colibri."
            },
            {
                titulo: "Lembran√ßas de Lugares",
                id: "V9zv1ltttXU",
                protegido: false,
                codigo: "103",
                ano: "1979",
                sinopse: "Lugares onde por, incont√°veis vezes, passeava com meu Pai e Juquinha Congonhas, Alto do Maranh√£o, Fazenda Castanheira terminando sempre em S√£o Br√°s do Suassu√≠"
            },
            {
                titulo: "Gera√ß√£o XUXA. O tempo passou",
                id: "D1dNMD7rd-U",
                protegido: true,
                codigo: "104",
                ano: "1985",
                sinopse: "No p√°teo da casa do Jos√© √Ålvaro Isabella, primas e amigas dan√ßam coreografias do Show da XUXA"
            },
            {
                titulo: "Jos√© √Ålvaro e Mari Carmen Cinquenta anos depois",
                id: "04qJBryv53M",
                protegido: true,
                codigo: "105",
                ano: "2011",
                sinopse: "Celebra√ß√£o das Bodas de Ouro, com retrospecto da cerim√¥nia em Madrid e comemora√ß√µes no p√°teo da casa em Lafaiete."
            },
            {
                titulo: "Recorda√ß√µes de Natal 1982 e 83‚Äì Fotos sem som",
                id: "CwUSWc4u6N0",
                protegido: true,
                codigo: "106",
                ano: "2011",
                sinopse: "Jos√© √Ålvaro vai fazer curso em Madrid e numa excurs√£o de √¥nibus, se conhecem. A partir de ent√£o tudo acontece."
            },
            {
                titulo: "Anivers√°rio Bella dois anos - Bras√≠lia",
                id: "WaeSjD2UZdE",
                protegido: true,
                codigo: "107",
                ano: "1982-1983",
                sinopse: "Lindas festas de Natal com os inesquec√≠veis encontros da Tias. Tios, primas e primos e o Papai Noel. Dezenas de anos passados."
            },
            {
                titulo: "86 anos Pai ‚Äì 50 anos Augusto",
                id: "mRn20jWdNd8",
                protegido: true,
                codigo: "108",
                ano: "1978",
                sinopse: "Na grande mesa de nossa sala de jantar comemoramos a data festiva. Cenas do irm√£o Augusto √Ålvaro."
            }
        ];

        function openVideo(videoId, isProtected) {
            if (isProtected) {
                const password = prompt('Este v√≠deo √© protegido. Digite a senha:');
                if (password !== '24042003') {
                    alert('Senha incorreta!');
                    return false;
                }
            }
            window.open(`https://www.youtube.com/watch?v=${videoId}`, '_blank');
            return false;
        }

        function renderizarVideos() {
            const videosContainer = document.getElementById('videos-container');
            
            videos.forEach(video => {
                const videoCard = document.createElement('div');
                videoCard.className = 'video-card';
                
                let videoContent = `
                    <div class="document-code">${video.codigo}</div>
                    <h3>${video.titulo}</h3>
                    <div class="document-author">Reinaldo Duarte Castanheira</div>
                    <div class="video-thumbnail">
                        <a href="javascript:void(0)" onclick="openVideo('${video.id}', ${video.protegido})">
                            <img src="https://img.youtube.com/vi/${video.id}/mqdefault.jpg" alt="${video.titulo}">
                            <div class="play-button">‚ñ∂</div>
                            ${video.protegido ? '<div class="protected-badge">P</div>' : ''}
                        </a>
                    </div>
                    <div class="document-year">${video.ano}</div>
                    ${video.sinopse ? `<div class="video-synopsis">${video.sinopse}</div>` : ''}
                    <div class="document-footer">
                        <span class="document-type">M√≠dia</span>
                    </div>
                `;
                
                videoCard.innerHTML = videoContent;
                videosContainer.appendChild(videoCard);
            });
        }

        // ========================================
        // FUNCIONALIDADE PRINCIPAL DA BIBLIOTECA
        // ========================================
        
        document.addEventListener('DOMContentLoaded', function() {
            // Renderizar v√≠deos
            renderizarVideos();
            
            // Bot√µes de expandir e recolher
            const exploreButton = document.getElementById('explore-button');
            const recolherButton = document.getElementById('recolher-button');
            const hiddenDocuments = document.getElementById('hidden-documents');
            
            // Adicionar v√≠deos √† se√ß√£o expandida
            videos.forEach(v => hiddenDocuments.insertAdjacentHTML('beforeend',
                `<div class="document-card video-card">
                    <div class="document-code">${v.codigo}</div>
                    <h3>${v.titulo}</h3>
                    <div class="document-author">Reinaldo Duarte Castanheira</div>
                    <div class="video-thumbnail">
                        <a href="javascript:void(0)" onclick="return openVideo('${v.id}', ${v.protegido});">
                            <img src="https://img.youtube.com/vi/${v.id}/mqdefault.jpg" alt="${v.titulo}">
                            <div class="play-button">‚ñ∂</div>
                            ${v.protegido ? '<div class="protected-badge">P</div>' : ''}
                        </a>
                    </div>
                    <div class="document-year">${v.ano}</div>
                    ${v.sinopse ? `<div class="video-synopsis">${v.sinopse}</div>` : ''}
                    <div class="document-footer"><span class="document-type">M√≠dia</span></div>
                </div>`
            ));
            
            // Smooth expand/collapse via CSS class
            exploreButton.addEventListener('click', function() {
                hiddenDocuments.classList.add('expanded');
                exploreButton.style.display = 'none';
                recolherButton.style.display = 'flex';
            });
            
            recolherButton.addEventListener('click', function() {
                hiddenDocuments.classList.remove('expanded');
                exploreButton.style.display = 'flex';
                recolherButton.style.display = 'none';
            });
            
            // Adicionar documentos ocultos
            const hiddenDocs = [
                {
                    code: "001",
                    title: "Carta de 1878 do Bisav√¥ para Vov√¥",
                    author: "Francisco Augusto Dur√£es Castanheira",
                    year: "1878",
                    description: "Documento hist√≥rico familiar de grande valor sentimental e geneal√≥gico.",
                    type: "Documento",
                    file: "#"
                },
                {
                    code: "002",
                    title: "O Livro da Vov√≥ Magdalena",
                    author: "Maria Magdalena Moura Costa Castanheira",
                    year: "1900",
                    description: "Mem√≥rias e registros pessoais da matriarca da fam√≠lia, preservando tradi√ß√µes e hist√≥rias.",
                    type: "Livro",
                    file: "#"
                },
                {
                    code: "003",
                    title: "Lafaiete Ontem e Hoje - Parte 1",
                    author: "Reinaldo Duarte Castanheira",
                    year: "2007",
                    description: "Primeira parte da s√©rie que documenta a evolu√ß√£o hist√≥rica de Lafaiete.",
                    type: "Livro",
                    file: "#"
                },
                {
                    code: "004",
                    title: "Lafaiete Ontem e Hoje - Parte 2",
                    author: "Reinaldo Duarte Castanheira",
                    year: "2008",
                    description: "Continua√ß√£o da documenta√ß√£o hist√≥rica de Lafaiete, com novos aspectos e per√≠odos.",
                    type: "Livro",
                    file: "#"
                },
                {
                    code: "005",
                    title: "Hist√≥ria da Medicina de Queluz a Lafaiete",
                    author: "Jos√© √Ålvaro Duarte Castanheira",
                    year: "2005",
                    description: "Estudo hist√≥rico sobre o desenvolvimento da medicina na regi√£o.",
                    type: "Livro",
                    file: "#"
                }
            ];
            
            hiddenDocs.forEach(doc => {
                const docCard = document.createElement('div');
                docCard.className = 'document-card';
                docCard.innerHTML = `
                    <div class="document-code">${doc.code}</div>
                    <h3>${doc.title}</h3>
                    <div class="document-author">${doc.author}</div>
                    <div class="document-year">${doc.year}</div>
                    <p>${doc.description}</p>
                    <div class="document-footer">
                        <span class="document-type">${doc.type}</span>
                        <a href="${doc.file}" class="read-button">Ler</a>
                    </div>
                `;
                hiddenDocuments.appendChild(docCard);
            });
            
            // Filtros
            const filterButtons = document.querySelectorAll('.filter-button');
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    const filter = this.getAttribute('data-filter');
                    const allCards = document.querySelectorAll('.document-card');
                    
                    allCards.forEach(card => {
                        const type = card.querySelector('.document-type').textContent.toLowerCase();
                        if (filter === 'all' || type === filter) {
                            card.style.display = 'flex';
                        } else {
                            card.style.display = 'none';
                        }
                    });
                });
            });
            
            // Ordena√ß√£o
            const sortSelect = document.querySelector('.sort-select');
            sortSelect.addEventListener('change', function() {
                const option = this.value;
                const container = document.querySelector('.documents-grid');
                const cards = Array.from(container.querySelectorAll('.document-card'));
                
                cards.sort((a, b) => {
                    switch(option) {
                        case 'newest':
                            return parseInt(b.querySelector('.document-year').textContent) - parseInt(a.querySelector('.document-year').textContent);
                        case 'oldest':
                            return parseInt(a.querySelector('.document-year').textContent) - parseInt(b.querySelector('.document-year').textContent);
                        case 'title':
                            return a.querySelector('h3').textContent.localeCompare(b.querySelector('h3').textContent);
                        case 'author':
                            return a.querySelector('.document-author').textContent.localeCompare(b.querySelector('.document-author').textContent);
                        default:
                            return 0;
                    }
                });
                
                cards.forEach(card => container.appendChild(card));
            });
            
            // Funcionalidade de busca
            const searchButton = document.querySelector('.search-button');
            const searchInput = document.querySelector('.search-input');
            
            searchButton.addEventListener('click', function() {
                const searchTerm = searchInput.value.toLowerCase();
                if (searchTerm.trim() === '') {
                    return;
                }
                
                const allDocuments = document.querySelectorAll('.document-card');
                
                // Se estiver buscando por c√≥digo, expandir a se√ß√£o oculta
                if (searchTerm.match(/^\d{3}$/)) {
                    hiddenDocuments.classList.add('expanded');
                    exploreButton.style.display = 'none';
                    recolherButton.style.display = 'flex';
                }
                
                allDocuments.forEach(function(doc) {
                    const code = doc.querySelector('.document-code').textContent;
                    const title = doc.querySelector('h3').textContent.toLowerCase();
                    const author = doc.querySelector('.document-author') ? 
                                  doc.querySelector('.document-author').textContent.toLowerCase() : '';
                    const description = doc.querySelector('p') ? doc.querySelector('p').textContent.toLowerCase() : '';
                    
                    if (code.includes(searchTerm) || 
                        title.includes(searchTerm) || 
                        author.includes(searchTerm) || 
                        description.includes(searchTerm)) {
                        doc.style.display = 'flex';
                        doc.style.animation = 'none';
                        void doc.offsetWidth;
                        doc.style.animation = 'fadeIn 0.5s ease forwards';
                    } else {
                        doc.style.display = 'none';
                    }
                });
                
                document.getElementById('acervo').scrollIntoView({ behavior: 'smooth' });
            });
            
            // Busca ao pressionar Enter
            searchInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchButton.click();
                }
            });
        });
    </script>
</body>
</html>

